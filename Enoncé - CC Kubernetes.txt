debian@Debian:~$ su -
Mot de passe : 
root@Debian:~# sudo apt update && sudo apt upgrade -y
AtteintÂ :1 http://security.debian.org/debian-security bookworm-security InRelease
AtteintÂ :2 http://deb.debian.org/debian bookworm InRelease                     
AtteintÂ :3 http://deb.debian.org/debian bookworm-updates InRelease             
AtteintÂ :4 http://repo.mysql.com/apt/debian bookworm InRelease                 
AtteintÂ :5 https://download.docker.com/linux/debian bookworm InRelease         
AtteintÂ :6 https://apt.releases.hashicorp.com bookworm InRelease               
AtteintÂ :7 https://prod-cdn.packages.k8s.io/repositories/isv:/kubernetes:/core:/stable:/v1.30/deb  InRelease
ErrÂ :5 https://download.docker.com/linux/debian bookworm InRelease
  Les signatures suivantes n'ont pas pu Ãªtre vÃ©rifiÃ©es car la clÃ© publique n'est pas disponibleÂ : NO_PUBKEY 7EA0A9C3F273FCD8
Lecture des listes de paquets... Fait
Construction de l'arbre des dÃ©pendances... Fait
Lecture des informations d'Ã©tat... Fait      
3 paquets peuvent Ãªtre mis Ã  jour. ExÃ©cutez Â« apt list --upgradable Â» pour les voir.
W: Une erreur s'est produite lors du contrÃ´le de la signature. Le dÃ©pÃ´t n'est pas mis Ã  jour et les fichiers d'index prÃ©cÃ©dents seront utilisÃ©s. Erreur de GPGÂ :Â https://download.docker.com/linux/debian bookworm InReleaseÂ :Â Les signatures suivantes n'ont pas pu Ãªtre vÃ©rifiÃ©es car la clÃ© publique n'est pas disponibleÂ : NO_PUBKEY 7EA0A9C3F273FCD8
W: Impossible de rÃ©cupÃ©rer https://download.docker.com/linux/debian/dists/bookworm/InRelease  Les signatures suivantes n'ont pas pu Ãªtre vÃ©rifiÃ©es car la clÃ© publique n'est pas disponibleÂ : NO_PUBKEY 7EA0A9C3F273FCD8
W: Le tÃ©lÃ©chargement de quelques fichiers d'index a Ã©chouÃ©, ils ont Ã©tÃ© ignorÃ©s, ou les anciens ont Ã©tÃ© utilisÃ©s Ã  la place.
Lecture des listes de paquets... Fait
Construction de l'arbre des dÃ©pendances... Fait
Lecture des informations d'Ã©tat... Fait      
Calcul de la mise Ã  jour... Fait
Les paquets suivants ont Ã©tÃ© installÃ©s automatiquement et ne sont plus nÃ©cessairesÂ :
  libdaxctl1 libdbus-glib-1-2 libndctl6 libpmem1 linux-image-6.1.0-25-amd64
Veuillez utiliser Â«Â sudo apt autoremoveÂ Â» pour les supprimer.
Les paquets suivants seront mis Ã  jourÂ :
  kubeadm kubectl kubelet
3 mis Ã  jour, 0 nouvellement installÃ©s, 0 Ã  enlever et 0 non mis Ã  jour.
Il est nÃ©cessaire de prendre 0 o/39,6 Mo dans les archives.
AprÃ¨s cette opÃ©ration, 4â€¯096 o d'espace disque supplÃ©mentaires seront utilisÃ©s.
apt-listchangesÂ : Lecture des fichiers de modifications (Â«Â changelogÂ Â»)...
(Lecture de la base de donnÃ©es... 186033 fichiers et rÃ©pertoires dÃ©jÃ  installÃ©s.
)
PrÃ©paration du dÃ©paquetage de .../kubeadm_1.30.13-1.1_amd64.deb ...
DÃ©paquetage de kubeadm (1.30.13-1.1) sur (1.30.12-1.1) ...
PrÃ©paration du dÃ©paquetage de .../kubectl_1.30.13-1.1_amd64.deb ...
DÃ©paquetage de kubectl (1.30.13-1.1) sur (1.30.12-1.1) ...
PrÃ©paration du dÃ©paquetage de .../kubelet_1.30.13-1.1_amd64.deb ...
DÃ©paquetage de kubelet (1.30.13-1.1) sur (1.30.12-1.1) ...
ParamÃ©trage de kubeadm (1.30.13-1.1) ...
ParamÃ©trage de kubectl (1.30.13-1.1) ...
ParamÃ©trage de kubelet (1.30.13-1.1) ...
root@Debian:~# 
root@Debian:~# 
root@Debian:~# sudo apt install docker.io -y
sudo systemctl enable docker
sudo systemctl start docker
sudo usermod -aG docker $USER
Lecture des listes de paquets... Fait
Construction de l'arbre des dÃ©pendances... Fait
Lecture des informations d'Ã©tat... Fait      
Les paquets suivants ont Ã©tÃ© installÃ©s automatiquement et ne sont plus nÃ©cessairesÂ :
  libdaxctl1 libdbus-glib-1-2 libndctl6 libpmem1 libslirp0
  linux-image-6.1.0-25-amd64 pigz slirp4netns
Veuillez utiliser Â«Â sudo apt autoremoveÂ Â» pour les supprimer.
Les paquets supplÃ©mentaires suivants seront installÃ©sÂ : 
  cgroupfs-mount containerd criu libintl-perl libintl-xs-perl
  libmodule-find-perl libnet1 libproc-processtable-perl libsort-naturally-perl
  needrestart python3-protobuf runc tini
Paquets suggÃ©rÃ©sÂ :
  docker-doc aufs-tools btrfs-progs debootstrap rinse rootlesskit xfsprogs
  zfs-fuse | zfsutils-linux needrestart-session | libnotify-bin
Les paquets suivants seront ENLEVÃ‰SÂ :
  containerd.io docker-ce docker-ce-cli docker-ce-rootless-extras
Les NOUVEAUX paquets suivants seront installÃ©sÂ :
  cgroupfs-mount containerd criu docker.io libintl-perl libintl-xs-perl
  libmodule-find-perl libnet1 libproc-processtable-perl libsort-naturally-perl
  needrestart python3-protobuf runc tini
0 mis Ã  jour, 14 nouvellement installÃ©s, 4 Ã  enlever et 0 non mis Ã  jour.
Il est nÃ©cessaire de prendre 67,0 Mo dans les archives.
AprÃ¨s cette opÃ©ration, 716 ko d'espace disque supplÃ©mentaires seront utilisÃ©s.
RÃ©ception deÂ :1 http://deb.debian.org/debian bookworm/main amd64 runc amd64 1.1.5+ds1-1+deb12u1 [2â€¯710 kB]
RÃ©ception deÂ :2 http://deb.debian.org/debian bookworm/main amd64 containerd amd64 1.6.20~ds1-1+deb12u1 [25,9 MB]
RÃ©ception deÂ :3 http://deb.debian.org/debian bookworm/main amd64 tini amd64 0.19.0-1 [255 kB]
RÃ©ception deÂ :4 http://deb.debian.org/debian bookworm/main amd64 docker.io amd64 20.10.24+dfsg1-1+deb12u1 [36,2 MB]
RÃ©ception deÂ :5 http://deb.debian.org/debian bookworm/main amd64 cgroupfs-mount all 1.4 [6â€¯276 B]
RÃ©ception deÂ :6 http://deb.debian.org/debian bookworm/main amd64 python3-protobuf amd64 3.21.12-3 [245 kB]
RÃ©ception deÂ :7 http://deb.debian.org/debian bookworm/main amd64 libnet1 amd64 1.1.6+dfsg-3.2 [60,3 kB]
RÃ©ception deÂ :8 http://deb.debian.org/debian bookworm/main amd64 criu amd64 3.17.1-2+deb12u1 [665 kB]
RÃ©ception deÂ :9 http://deb.debian.org/debian bookworm/main amd64 libintl-perl all 1.33-1 [720 kB]
RÃ©ception deÂ :10 http://deb.debian.org/debian bookworm/main amd64 libintl-xs-perl amd64 1.33-1 [15,6 kB]
RÃ©ception deÂ :11 http://deb.debian.org/debian bookworm/main amd64 libmodule-find-perl all 0.16-2 [10,6 kB]
RÃ©ception deÂ :12 http://deb.debian.org/debian bookworm/main amd64 libproc-processtable-perl amd64 0.634-1+b2 [43,1 kB]
RÃ©ception deÂ :13 http://deb.debian.org/debian bookworm/main amd64 libsort-naturally-perl all 1.03-4 [13,1 kB]
RÃ©ception deÂ :14 http://deb.debian.org/debian bookworm/main amd64 needrestart all 3.6-4+deb12u3 [60,5 kB]
67,0 Mo rÃ©ceptionnÃ©s en 26s (2â€¯559 ko/s)                                       
(Lecture de la base de donnÃ©es... 186033 fichiers et rÃ©pertoires dÃ©jÃ  installÃ©s.
)
Suppression de docker-ce (5:28.1.1-1~debian.12~bookworm) ...
Suppression de containerd.io (1.7.27-1) ...
Suppression de docker-ce-cli (5:28.1.1-1~debian.12~bookworm) ...
Suppression de docker-ce-rootless-extras (5:28.1.1-1~debian.12~bookworm) ...
SÃ©lection du paquet runc prÃ©cÃ©demment dÃ©sÃ©lectionnÃ©.
(Lecture de la base de donnÃ©es... 185806 fichiers et rÃ©pertoires dÃ©jÃ  installÃ©s.
)
PrÃ©paration du dÃ©paquetage de .../00-runc_1.1.5+ds1-1+deb12u1_amd64.deb ...
DÃ©paquetage de runc (1.1.5+ds1-1+deb12u1) ...
SÃ©lection du paquet containerd prÃ©cÃ©demment dÃ©sÃ©lectionnÃ©.
PrÃ©paration du dÃ©paquetage de .../01-containerd_1.6.20~ds1-1+deb12u1_amd64.deb .
..
DÃ©paquetage de containerd (1.6.20~ds1-1+deb12u1) ...
SÃ©lection du paquet tini prÃ©cÃ©demment dÃ©sÃ©lectionnÃ©.
PrÃ©paration du dÃ©paquetage de .../02-tini_0.19.0-1_amd64.deb ...
DÃ©paquetage de tini (0.19.0-1) ...
SÃ©lection du paquet docker.io prÃ©cÃ©demment dÃ©sÃ©lectionnÃ©.
PrÃ©paration du dÃ©paquetage de .../03-docker.io_20.10.24+dfsg1-1+deb12u1_amd64.de
b ...
DÃ©paquetage de docker.io (20.10.24+dfsg1-1+deb12u1) ...
SÃ©lection du paquet cgroupfs-mount prÃ©cÃ©demment dÃ©sÃ©lectionnÃ©.
PrÃ©paration du dÃ©paquetage de .../04-cgroupfs-mount_1.4_all.deb ...
DÃ©paquetage de cgroupfs-mount (1.4) ...
SÃ©lection du paquet python3-protobuf prÃ©cÃ©demment dÃ©sÃ©lectionnÃ©.
PrÃ©paration du dÃ©paquetage de .../05-python3-protobuf_3.21.12-3_amd64.deb ...
DÃ©paquetage de python3-protobuf (3.21.12-3) ...
SÃ©lection du paquet libnet1:amd64 prÃ©cÃ©demment dÃ©sÃ©lectionnÃ©.
PrÃ©paration du dÃ©paquetage de .../06-libnet1_1.1.6+dfsg-3.2_amd64.deb ...
DÃ©paquetage de libnet1:amd64 (1.1.6+dfsg-3.2) ...
SÃ©lection du paquet criu prÃ©cÃ©demment dÃ©sÃ©lectionnÃ©.
PrÃ©paration du dÃ©paquetage de .../07-criu_3.17.1-2+deb12u1_amd64.deb ...
DÃ©paquetage de criu (3.17.1-2+deb12u1) ...
SÃ©lection du paquet libintl-perl prÃ©cÃ©demment dÃ©sÃ©lectionnÃ©.
PrÃ©paration du dÃ©paquetage de .../08-libintl-perl_1.33-1_all.deb ...
DÃ©paquetage de libintl-perl (1.33-1) ...
SÃ©lection du paquet libintl-xs-perl prÃ©cÃ©demment dÃ©sÃ©lectionnÃ©.
PrÃ©paration du dÃ©paquetage de .../09-libintl-xs-perl_1.33-1_amd64.deb ...
DÃ©paquetage de libintl-xs-perl (1.33-1) ...
SÃ©lection du paquet libmodule-find-perl prÃ©cÃ©demment dÃ©sÃ©lectionnÃ©.
PrÃ©paration du dÃ©paquetage de .../10-libmodule-find-perl_0.16-2_all.deb ...
DÃ©paquetage de libmodule-find-perl (0.16-2) ...
SÃ©lection du paquet libproc-processtable-perl:amd64 prÃ©cÃ©demment dÃ©sÃ©lectionnÃ©.
PrÃ©paration du dÃ©paquetage de .../11-libproc-processtable-perl_0.634-1+b2_amd64.
deb ...
DÃ©paquetage de libproc-processtable-perl:amd64 (0.634-1+b2) ...
SÃ©lection du paquet libsort-naturally-perl prÃ©cÃ©demment dÃ©sÃ©lectionnÃ©.
PrÃ©paration du dÃ©paquetage de .../12-libsort-naturally-perl_1.03-4_all.deb ...
DÃ©paquetage de libsort-naturally-perl (1.03-4) ...
SÃ©lection du paquet needrestart prÃ©cÃ©demment dÃ©sÃ©lectionnÃ©.
PrÃ©paration du dÃ©paquetage de .../13-needrestart_3.6-4+deb12u3_all.deb ...
DÃ©paquetage de needrestart (3.6-4+deb12u3) ...
ParamÃ©trage de libnet1:amd64 (1.1.6+dfsg-3.2) ...
ParamÃ©trage de runc (1.1.5+ds1-1+deb12u1) ...
ParamÃ©trage de libmodule-find-perl (0.16-2) ...
ParamÃ©trage de tini (0.19.0-1) ...
ParamÃ©trage de libproc-processtable-perl:amd64 (0.634-1+b2) ...
ParamÃ©trage de libintl-perl (1.33-1) ...
ParamÃ©trage de cgroupfs-mount (1.4) ...
ParamÃ©trage de python3-protobuf (3.21.12-3) ...
ParamÃ©trage de containerd (1.6.20~ds1-1+deb12u1) ...

Fichier de configuration Â«Â /etc/containerd/config.tomlÂ Â»
 ==> ModifiÃ© (par vous ou par un script) depuis l'installation.
 ==> Le distributeur du paquet a fourni une version mise Ã  jour.
   Que voulez-vous faireÂ ? Vos options sont les suivantesÂ :
    Y ou I Â : installer la version du responsable du paquet
    N ou O Â : garder votre version actuellement installÃ©e
      D    Â : afficher les diffÃ©rences entre les versions
      Z    Â : suspendre ce processus pour examiner la situation
 L'action par dÃ©faut garde votre version actuelle.
*** config.toml (Y/I/N/O/D/Z) [dÃ©faut=N] ? 
ParamÃ©trage de libsort-naturally-perl (1.03-4) ...
ParamÃ©trage de needrestart (3.6-4+deb12u3) ...
ParamÃ©trage de docker.io (20.10.24+dfsg1-1+deb12u1) ...
Installation de la nouvelle version du fichier de configuration /etc/default/doc
ker ...
Installation de la nouvelle version du fichier de configuration /etc/init.d/dock
er ...
ParamÃ©trage de libintl-xs-perl (1.33-1) ...
ParamÃ©trage de criu (3.17.1-2+deb12u1) ...
Traitement des actions diffÃ©rÃ©es (Â«Â triggersÂ Â») pour man-db (2.11.2-2)Â ...
Traitement des actions diffÃ©rÃ©es (Â«Â triggersÂ Â») pour libc-bin (2.36-9+deb12u10)Â 
...
Synchronizing state of docker.service with SysV service script with /lib/systemd/systemd-sysv-install.
Executing: /lib/systemd/systemd-sysv-install enable docker
root@Debian:~# 

root@Debian:~# curl -LO https://storage.googleapis.com/minikube/releases/latest/minikube_latest_amd64.deb
sudo dpkg -i minikube_latest_amd64.deb
  % Total    % Received % Xferd  Average Speed   Time    Time     Time  Current
                                 Dload  Upload   Total   Spent    Left  Speed
100 37.0M  100 37.0M    0     0  6608k      0  0:00:05  0:00:05 --:--:-- 7114k
SÃ©lection du paquet minikube prÃ©cÃ©demment dÃ©sÃ©lectionnÃ©.
(Lecture de la base de donnÃ©es... 186805 fichiers et rÃ©pertoires dÃ©jÃ  installÃ©s.)
PrÃ©paration du dÃ©paquetage de minikube_latest_amd64.deb ...
DÃ©paquetage de minikube (1.35.0-0) ...
ParamÃ©trage de minikube (1.35.0-0) ...
root@Debian:~# 

debian@Debian:~$ sudo useradd -m -G docker -s /bin/bash minikube-user
sudo passwd minikube-user
[sudo] Mot de passe de debianÂ : 
debian n'est pas dans le fichier sudoers.
[sudo] Mot de passe de debianÂ : 
debian n'est pas dans le fichier sudoers.
 
debian@Debian:~$ 
debian@Debian:~$ su - minikube-user
Mot de passe : 
minikube-user@Debian:~$ 
minikube-user@Debian:~$ minikube start --driver=docker
ğŸ˜„  minikube v1.35.0 sur Debian 12.10
âœ¨  Utilisation du pilote docker basÃ© sur le profil existant

ğŸ§¯  L'allocation de mÃ©moire demandÃ©e de 1966MiB ne laisse pas de place pour la surcharge systÃ¨me (mÃ©moire systÃ¨me totaleÂ : 1966MiB). Vous pouvez rencontrer des problÃ¨mes de stabilitÃ©.
ğŸ’¡  SuggestionÂ : Start minikube with less memory allocated: 'minikube start --memory=1966mb'

ğŸ‘  DÃ©marrage du nÅ“ud "minikube" primary control-plane dans le cluster "minikube"
ğŸšœ  Extraction de l'image de base v0.0.46...
ğŸ”„  RedÃ©marrage du docker container existant pour "minikube" ...

ğŸ§¯  Docker est presque Ã  court d'espace disque, ce qui peut entraÃ®ner l'Ã©chec des dÃ©ploiementsÂ ! (95Â % de la capacitÃ©). Vous pouvez passer '--force' pour ignorer cette vÃ©rification.
ğŸ’¡  SuggestionÂ : 

    Essayez une ou plusieurs des solutions suivantes pour libÃ©rer de l'espace sur l'appareilÂ :
    
    1. ExÃ©cutez "docker system prune" pour supprimer les donnÃ©es Docker inutilisÃ©es (Ã©ventuellement avec "-a")
    2. Augmentez le stockage allouÃ© Ã  Docker for Desktop en cliquant surÂ :
    IcÃ´ne Docker > Settings > Ressources > Disk Image Size
    3. ExÃ©cutez "minikube ssh -- docker system prune" si vous utilisez l'environnement d'exÃ©cution du conteneur Docker
ğŸ¿  ProblÃ¨me connexe: https://github.com/kubernetes/minikube/issues/9024

ğŸ³  PrÃ©paration de Kubernetes v1.32.0 sur Docker 27.4.1...
    â–ª GÃ©nÃ©ration des certificats et des clÃ©s
    â–ª DÃ©marrage du plan de contrÃ´le ...
    â–ª Configuration des rÃ¨gles RBAC ...
ğŸ”—  Configuration de bridge CNI (Container Networking Interface)...
ğŸ”  VÃ©rification des composants Kubernetes...
    â–ª Utilisation de l'image gcr.io/k8s-minikube/storage-provisioner:v5
ğŸŒŸ  Modules activÃ©s: storage-provisioner, default-storageclass
ğŸ„  TerminÃ© ! kubectl est maintenant configurÃ© pour utiliser "minikube" cluster et espace de noms "default" par dÃ©faut.
minikube-user@Debian:~$ 
minikube-user@Debian:~$ 
minikube-user@Debian:~$ 
minikube-user@Debian:~$ 
minikube-user@Debian:~$ 
minikube-user@Debian:~$ sudo minikube start --driver=none
[sudo] Mot de passe de minikube-userÂ : 
minikube-user n'est pas dans le fichier sudoers.
minikube-user@Debian:~$ 
minikube-user@Debian:~$ 
minikube-user@Debian:~$ 
minikube-user@Debian:~$ 
minikube-user@Debian:~$ kubectl get nodes
NAME       STATUS   ROLES           AGE     VERSION
minikube   Ready    control-plane   9m19s   v1.32.0
minikube-user@Debian:~$ git clone https://github.com/dockersamples/example-voting-app.git
cd example-voting-app/k8s-specifications
Clonage dans 'example-voting-app'...
remote: Enumerating objects: 1179, done.
remote: Total 1179 (delta 0), reused 0 (delta 0), pack-reused 1179 (from 1)
RÃ©ception d'objets: 100% (1179/1179), 1.21 Mio | 4.71 Mio/s, fait.
RÃ©solution des deltas: 100% (448/448), fait.
minikube-user@Debian:~/example-voting-app/k8s-specifications$ 
minikube-user@Debian:~/example-voting-app/k8s-specifications$ 
minikube-user@Debian:~/example-voting-app/k8s-specifications$ 
minikube-user@Debian:~/example-voting-app/k8s-specifications$ 
minikube-user@Debian:~/example-voting-app/k8s-specifications$ 
minikube-user@Debian:~/example-voting-app/k8s-specifications$ kubectl apply -f . 
deployment.apps/db created
service/db created
deployment.apps/redis created
service/redis created
deployment.apps/result created
service/result created
deployment.apps/vote created
service/vote created
deployment.apps/worker created
minikube-user@Debian:~/example-voting-app/k8s-specifications$ 
minikube-user@Debian:~/example-voting-app/k8s-specifications$ 
minikube-user@Debian:~/example-voting-app/k8s-specifications$ 
minikube-user@Debian:~/example-voting-app/k8s-specifications$ 
minikube-user@Debian:~/example-voting-app/k8s-specifications$ 
minikube-user@Debian:~/example-voting-app/k8s-specifications$ 
minikube-user@Debian:~/example-voting-app/k8s-specifications$ 
minikube-user@Debian:~/example-voting-app/k8s-specifications$ 
minikube-user@Debian:~/example-voting-app/k8s-specifications$ kubectl apply -f . 
deployment.apps/db unchanged
service/db unchanged
deployment.apps/redis unchanged
service/redis unchanged
deployment.apps/result unchanged
service/result unchanged
deployment.apps/vote unchanged
service/vote unchanged
deployment.apps/worker unchanged
minikube-user@Debian:~/example-voting-app/k8s-specifications$ 
minikube-user@Debian:~/example-voting-app/k8s-specifications$ 
minikube-user@Debian:~/example-voting-app/k8s-specifications$ 
minikube-user@Debian:~/example-voting-app/k8s-specifications$ 
minikube-user@Debian:~/example-voting-app/k8s-specifications$ 
minikube-user@Debian:~/example-voting-app/k8s-specifications$ kubectl get pods
kubectl get svc
Unable to connect to the server: net/http: TLS handshake timeout
Unable to connect to the server: net/http: TLS handshake timeout
minikube-user@Debian:~/example-voting-app/k8s-specifications$ 
minikube-user@Debian:~/example-voting-app/k8s-specifications$ 
minikube-user@Debian:~/example-voting-app/k8s-specifications$ 
minikube-user@Debian:~/example-voting-app/k8s-specifications$ 
minikube-user@Debian:~/example-voting-app/k8s-specifications$ 
minikube-user@Debian:~/example-voting-app/k8s-specifications$ 
minikube-user@Debian:~/example-voting-app/k8s-specifications$ 
minikube-user@Debian:~/example-voting-app/k8s-specifications$ 
minikube-user@Debian:~/example-voting-app/k8s-specifications$ minikube status
â—  L'exÃ©cution de "docker container inspect minikube --format={{.State.Status}}" a pris un temps inhabituellement long : 2.192453828s
ğŸ’¡  Le redÃ©marrage du service docker peut amÃ©liorer les performances.
log: exiting because of error: write /tmp/minikube_status_47498a466208b34b494f19c60a266662273857e0_0.log: no space left on device
minikube-user@Debian:~/example-voting-app/k8s-specifications$ 





